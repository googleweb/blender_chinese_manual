

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>渲染 Passes &mdash; Blender参考手册</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Blender参考手册" href="../../index.html"/>
        <link rel="up" title="Blender渲染引擎" href="index.html"/>
        <link rel="next" title="Motion Blur" href="motion_blur.html"/>
        <link rel="prev" title="渲染 Layers" href="layers.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../contents.html" class="icon icon-home"> Blender 2.77 手册
          

          
            
            <img src="../../_static/sidebar_logo.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="查找文献" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">入门指南</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../interface/index.html">界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../editors/index.html">编辑器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_system/index.html">数据系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modeling/index.html">建模</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../painting_sculpting/index.html">绘制与雕刻</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rigging/index.html">骨骼装配</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../animation/index.html">动画</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../physics/index.html">物理</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">渲染</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">简介</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Blender渲染引擎</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="materials/index.html">Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="textures/index.html">纹理</a></li>
<li class="toctree-l3"><a class="reference internal" href="lighting/index.html">Lighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="world/index.html">World</a></li>
<li class="toctree-l3"><a class="reference internal" href="layers.html">渲染 Layers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">渲染 Passes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#render-passes-in-detail">渲染 Passes In Detail</a></li>
<li class="toctree-l4"><a class="reference internal" href="#selecting-render-passes">选择 渲染 Passes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#excluding-render-passes">Excluding 渲染 Passes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-render-passes">Using 渲染 Passes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="motion_blur.html">Motion Blur</a></li>
<li class="toctree-l3"><a class="reference internal" href="antialiasing.html">Anti-Aliasing</a></li>
<li class="toctree-l3"><a class="reference internal" href="post_processing/index.html">Post Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="quality.html">渲染 Quality</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance.html">Performance Considerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cycles/index.html">Cycles渲染引擎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../output/index.html">渲染输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="../post_process/index.html">Post Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../freestyle/index.html">Freestyle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflows/index.html">Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../opengl.html">OpenGL 渲染</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../compositing/index.html">合成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../game_engine/index.html">游戏引擎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preferences/index.html">用户首选项</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced/index.html">高级应用</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/index.html">问题排查</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/index.html">术语</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">关于本手册</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../contents.html">Blender 2.77 手册</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../contents.html">文献</a> &raquo;</li>
      
          <li><a href="../index.html">渲染</a> &raquo;</li>
      
          <li><a href="index.html">Blender渲染引擎</a> &raquo;</li>
      
    <li>渲染 Passes</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/render/blender_render/passes.txt" rel="nofollow"> 查看页面源码</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="render-passes">
<h1>渲染 Passes<a class="headerlink" href="#render-passes" title="Permalink to this headline">¶</a></h1>
<p>渲染 Passes are necessary because of the different things the Blender渲染引擎 must
calculate to give you the final image.
In each &#8216;pass&#8217; the engine calculates different interactions between objects.</p>
<div class="section" id="render-passes-in-detail">
<h2>渲染 Passes In Detail<a class="headerlink" href="#render-passes-in-detail" title="Permalink to this headline">¶</a></h2>
<p>Everything you see in a render must be calculated for the final image.
All interactions between objects in your scene, lighting, cameras, background images,
world settings, etc.,
must all be separately calculated in different passes for different reasons,
such as calculating shadows.</p>
<p>In a render, every pixel has been calculated several times to make sure it will show the right
color for the right part of the image.
Various things that are calculated in a standard render include:</p>
<ul class="simple">
<li>Where are shadows cast?</li>
<li>How is ambient light in the environment blocked (occluded) by objects in the scene?</li>
<li>How is light reflected off mirrored surfaces?
Like shadows, lines are calculated, except this time they come from the camera and bounce off mirrored surfaces,
so that when these lines hit an object, the engine calculates that this is what the camera should see.</li>
<li>How is light bent (refracted) as is passes through transparent objects?
Does it go straight through? Does it bend? If so, at what depth in the object?</li>
<li>What designated objects are in the scene, and what is their outline?
Should the object appear blurred, or should it appear in sharp focus?</li>
<li>How fast is something moving (velocity)?
Should it appear blurred given our frame rate or is it slow enough to still be focused on properly?</li>
<li>How far away from the camera are objects&#8217; surfaces (Z-depth)?
Can the object&#8217;s surfaces be seen at all, or are they being blocked by another object&#8217;s geometry?</li>
<li>Does an object have a normal vector (bumpmap)?
Do shadows and apparent geometry need to be calculated for any objects?</li>
<li>Is there any specularity ? Are objects with textures such as metal shiny at all?</li>
</ul>
<p>The answer to each of the above questions is an image or map, as shown below:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/render-renderpasses-example.png"><img alt="../../_images/render-renderpasses-example.png" src="../../_images/render-renderpasses-example.png" style="width: 600px;" /></a>
</div>
<p>Each 渲染 Pass puts out an image or a map. For the purposes of this example,
a 渲染 Layer was defined to produce all possible outputs. When a 渲染 Layer input-node
was added to the node diagram and the 渲染 Layer input-node was subsequently associated with
the 渲染 Layer, all of the layer&#8217;s outputs appeared as connection points on the right-hand
(output) side of the node.</p>
<p>渲染 Passes that produce 图像s can be directly viewed in a viewer, or,
if they are the only pass that is rendered, saved as the render image. If the pass is enabled,
it can be saved in a multilayer OpenEXR format.</p>
<p>If the 渲染 Pass output is not an image but is a map,
it needs to be translated into something that we can see. For example, the Z-depth map is an
array of values that specifies how far away from the camera each pixel is;
values range between +/-3,000,000 Blender Units or so. The intermediate node you see above,
between the 渲染 Layer output socket and the Viewer node input socket (such as Map Value)
does this translation or scaling. You must use that specific kind of translation node to get
good results if you intend on operating on that map as an image. You must then,
after making any adjustments,
run the map back through that node to re-scale it back to the original before saving.</p>
</div>
<div class="section" id="selecting-render-passes">
<h2>选择 渲染 Passes<a class="headerlink" href="#selecting-render-passes" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<img alt="../../_images/renderlayer-panel.png" src="../../_images/renderlayer-panel.png" />
</div>
<p>渲染 Passes are the various distinct outputs that the renderer is able to generate.
All of the following render outputs are normally combined into a single output known,
appropriately enough, as the <em>Combined</em> output.
But you can also select any of them to be output as a separate pass. (If you do so, in most
cases you can choose whether to <em>also</em> continue to include it in the Combined output.)</p>
<p>Some of these outputs must be enabled and used within your scene
(and not just selected in the 渲染 Layer panel) in order to show anything.
For example, if you do not have any lights in your scene,
or those lights have been set to not cast shadows,
or objects in the limelight do not have materials which have been set to receive shadows,
the <em>Shadow</em> pass will be blank; there&#8217;s simply nothing to show you.
If you have not enabled <em>Ambient Occlusion</em> in your World environment settings,
the <em>AO</em> pass will be blank, even if you select it here.</p>
<p>To save time and disk space, you have to tell Blender each of the passes to render in the 渲染 Layers panel
(which we first introduced on <a class="reference internal" href="../post_process/layers.html"><span class="doc">the previous page</span></a>):</p>
<dl class="docutils">
<dt>Combined</dt>
<dd>This renders everything in the image, even if it&#8217;s not necessary.
(&#8220;The whole enchilada,&#8221; so to speak.) This is all the options below,
blended into a single output, <em>except</em> those options which you&#8217;ve indicated should be omitted from this pass,
as indicated with the camera button.</dd>
<dt>Z</dt>
<dd>The Z-depth map; how far away each pixel is from the camera. Used for Depth-Of-Field (DOF).
The depth map is inverse linear <em>(1/distance)</em> from the camera clip start.</dd>
<dt>Vector</dt>
<dd>The direction and speed things are moving. Used with Vector Blur.</dd>
<dt>Normal</dt>
<dd>Calculates lighting and apparent geometry for a bumpmap (an image which is used to fake detail on an object)
or for changing the apparent direction of light falling on an object.</dd>
<dt>UV</dt>
<dd>Allows texturing after rendering. See UV node.</dd>
<dt>Mist</dt>
<dd>Deliver Mist factor pass.</dd>
<dt>Object Index</dt>
<dd>Masks selected objects. See MaskObj node.</dd>
<dt>Color</dt>
<dd>The color of materials without shading.</dd>
<dt>Diffuse</dt>
<dd>The diffuse shading of materials.</dd>
<dt>Specular</dt>
<dd>Specular highlights.</dd>
<dt>Shadow</dt>
<dd>Shadows cast. Make sure shadows are cast by your lights (positive or negative), and received by materials.
To use this pass, mix multiply it with the Diffuse pass.</dd>
<dt>Emit</dt>
<dd>Emission pass.</dd>
<dt>AO</dt>
<dd>Ambient Occlusion. Make sure it&#8217;s turned on in your environment and that RayTracing is enabled.</dd>
<dt>Environment</dt>
<dd>Environment lighting.</dd>
<dt>Indirect</dt>
<dd>Indirect lighting pass.</dd>
<dt>Reflection</dt>
<dd>Reflection off mirrors and other reflective surfaces (highly waxed white floors, for example).
Mix Add this pass to Diffuse to use it.</dd>
<dt>Refraction</dt>
<dd>Refraction of colors through transparent meshes. Mix Add this pass to the Diffuse pass to use it.</dd>
</dl>
<p>When you enable a pass, the appropriate socket on the 渲染 Layers node shows up like magic,
and can be used as shown in the example above.</p>
</div>
<div class="section" id="excluding-render-passes">
<h2>Excluding 渲染 Passes<a class="headerlink" href="#excluding-render-passes" title="Permalink to this headline">¶</a></h2>
<p>As we said, the <em>Combined</em> output is an amalgam of several outputs which are <em>also</em>
available separately. When you select one of these outputs,
they will be provided separately <em>and also</em> included in the Combined pass.</p>
<p>When you enable the 相机 icon that is beside several of the pass options,
the particular pass will be excluded from the combined pass.
They will be made available separately <em>but not</em> included in the combined pass.</p>
</div>
<div class="section" id="using-render-passes">
<h2>Using 渲染 Passes<a class="headerlink" href="#using-render-passes" title="Permalink to this headline">¶</a></h2>
<p>The primary purpose of 渲染 Passes is to enable you to process the various outputs in
different ways, by constructing networks of render nodes.
You can achieve many special effects,
and economize considerably on the render times of complicated scenes,
by creative and effective use of this facility.
We&#8217;ll show you a few examples of this in just a moment.</p>
<p>Quite a bit of information about the typical uses for some of the passes is discussed
elsewhere:</p>
<ul class="simple">
<li>图像: Since this is the main product, all of Blender uses it.</li>
<li>Alpha: See the <em>AlphaOver</em> node and all of the <em>Matte</em> nodes.</li>
<li>Z: See the <em>Defocus</em> node.</li>
<li>Vec: See the <em>Vector Blur</em> node.</li>
<li>Normal: See the <em>Normal</em> node.</li>
</ul>
<div class="section" id="recoloring-shadows">
<h3>Recoloring Shadows<a class="headerlink" href="#recoloring-shadows" title="Permalink to this headline">¶</a></h3>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/render-renderpasses-example2.png"><img alt="../../_images/render-renderpasses-example2.png" src="../../_images/render-renderpasses-example2.png" style="width: 300px;" /></a>
</div>
<p>Let us run the Shadow buffer through a colorization node setup, then recombine it;
all your shadows will be artificially colored.
Lots of threads in this node setup are shown to the right, so let us walk through it.
On the left is the 渲染 Layer input node:
it refers to one of the 渲染 Layers that we have defined for our scene. In the scene,
we have a reflective ball on a pedestal standing in front of a backdrop. Everything
(except the ball) is gray. We use a standard four-light rig: backfill placed high,
two sidefills at ground level, and a key light above and to the left of camera. Suzanne,
a monkey-shaped geometry, is standing in front of the key light,
so her shadow is cast into the scene on the floor.
The ball casts shadows onto the backdrop and floor.</p>
<p>The output channels of the 渲染 Layer node are determined by which buttons we selected when
defining our 渲染 Layer.
The top two viewers show you the image output using the Shadow as the Alpha channel,
and the node next to it just the Shadow channel. Where the Shadow is dark,
the image in the left viewer is transparent.
We have used the Shadow to cut out parts of the image.</p>
<p>We then take the shadow through an RGB Curve, which is set to magnify just the Blue by 75%;
so a gray shadow of RGB(40, 40, 40) becomes RGB(40, 40, 40×1.75=70).
That blue-tinged shadow is shown in the bottom viewer. Now we have two options:
AlphaOver and Mix. For either option:</p>
<ul class="simple">
<li>Use the Shadow map as a Factor.</li>
<li>Feed the Blue Shadow to the Top Socket.</li>
<li>Feed the core or base image to the Bottom Socket.</li>
</ul>
<p>The resulting image is the same in either case; a blue shadow.
Note that Suzanne&#8217;s reflection is not blue; there&#8217;s a different 渲染 Pass for that.</p>
<p>You could just as easily swap in another image entirely; for example,
the shadow map from another render layer.
You can even take an image from another project entirely and use that instead
(using the 图像 输入 node), to get a different effect. (For example,
an effect similar to a <em>Star Wars Episode One</em> movie poster,
where Anakin Skywalker already casts the shadow of Darth Vader.)</p>
</div>
<div class="section" id="compositing-ambient-occlusion">
<h3>合成 Ambient Occlusion<a class="headerlink" href="#compositing-ambient-occlusion" title="Permalink to this headline">¶</a></h3>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/render-passes-ao.png"><img alt="../../_images/render-passes-ao.png" src="../../_images/render-passes-ao.png" style="width: 600px;" /></a>
</div>
<p>AO is a geometry-based dirt shader, making corners darker.
It is separately enabled in the World settings and computed as a separate pass. When enabled,
it has one of three Modes: <em>Add</em>, <em>Subtract</em> , <em>Both</em> and a variable <em>Energy</em> level
(which changes the intensity of the shading).
The third variable is the amount of Ambient light that the material receives.
If it does not receive any, then ambient occlusion does not affect it.
Based on these variables, Blender computes an AO pass.
If you call it out as a separate pass and wish to composite it back into your image,
you will need to enable the Color and Diffuse pass as well.</p>
<p>To configure your setup, consider the example image above.</p>
<ul class="simple">
<li>First, depending on the AO mode do one of the following: If AO mode is Add: directly use the AO pass.
If AO mode is Sub: Calculate AO - 1, or if AO mode is Both: Calculate 2 × AO - 1.</li>
<li>Multiply the output of Step 1 with the AO energy level.</li>
<li>Multiply the output of Step 2 with the material&#8217;s ambience value.
If you have materials which receive different ambience light levels (0.5 is the default),
one would have to create an ambience map based on Object ID.</li>
<li>Multiply the output of Step 3 with the color pass.</li>
<li>Add the output of Step 4 to the diffuse pass.</li>
</ul>
<p>If shadows, colored ambient light, specularity, reflections, and/or refractions are involved
they have to be added to the diffuse pass before adding the converted AO pass.</p>
</div>
<div class="section" id="vector-blurring-shadows">
<h3>Vector Blurring Shadows<a class="headerlink" href="#vector-blurring-shadows" title="Permalink to this headline">¶</a></h3>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/nodes-vectorblur-shadow.jpg"><img alt="../../_images/nodes-vectorblur-shadow.jpg" src="../../_images/nodes-vectorblur-shadow.jpg" style="width: 600px;" /></a>
</div>
<p>When using Vector Blur instead of Motion Blur, objects in motion are blurred,
but objects at rest (with respect to the camera) are not blurred.
The crossover is the shadow of the object in motion. Above,
we have a cube in motion across a ground plane.
If we just ran the combined pass through Vector Blur,
you can see the result in the lower right-hand corner; the box is blurred,
but its shadow is sharply in focus, and thus the image does not look realistic.</p>
<p>Therefore, we need to separate out the diffuse and shadow passes from the floor by creating a
&#8220;Floor&#8221; render layer. That render layer has Diffuse and Shadow passes enabled,
and only renders the floor object (layer 2). Another render layer (&#8220;Cube&#8221;)
renders the Z and Vector passes, and only renders the cube (on layer 1). Using the Blur node,
we blur the shadow pass, and then combine the diffuse and blurred shadow by multiplying them
together in a Mix Multiply node; we then have a blurred shadow on a crisp ground plane.
We can then mix the vector-blurred object to provide a realistic-looking image.</p>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>渲染 Passes can be manipulated to give you almost complete control over your final image.
Causing objects to cast shadows that are not really their shadows,
making objects appear out of focus or sharply in focus like a real camera, manipulating colors
just for final 后期处理 or just reconfiguring your render passes to save render time,
are all things which you might wish to manipulate the render engine for.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="motion_blur.html" class="btn btn-neutral float-right" title="Motion Blur" accesskey="n">下一页 <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="layers.html" class="btn btn-neutral" title="渲染 Layers" accesskey="p"><span class="fa fa-arrow-circle-left"></span> 上一页</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright : This page is licensed under a CC-BY-SA 4.0 Intl. License.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.77',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1418081-1', 'auto');
  ga('send', 'pageview');

</script>
</div>


</body>
</html>