

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python Errors &mdash; Blender参考手册</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Blender参考手册" href="../index.html"/>
        <link rel="up" title="问题排查" href="index.html"/>
        <link rel="next" title="Recovering Data" href="recover.html"/>
        <link rel="prev" title="Crashes" href="crash.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../contents.html" class="icon icon-home"> Blender 2.77 手册
          

          
            
            <img src="../_static/sidebar_logo.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="查找文献" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">入门指南</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../interface/index.html">用户界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="../editors/index.html">编辑器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_system/index.html">数据系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modeling/index.html">建模</a></li>
<li class="toctree-l1"><a class="reference internal" href="../painting_sculpting/index.html">绘制与雕刻</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rigging/index.html">骨骼装配</a></li>
<li class="toctree-l1"><a class="reference internal" href="../animation/index.html">动画</a></li>
<li class="toctree-l1"><a class="reference internal" href="../physics/index.html">物理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../render/index.html">渲染</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compositing/index.html">合成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../game_engine/index.html">游戏引擎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preferences/index.html">用户首选项</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">高级应用</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">问题排查</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="startup.html">Startup</a></li>
<li class="toctree-l2"><a class="reference internal" href="3d_view.html">3D视图</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpu.html">Graphics Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="crash.html">Crashes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Python Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pythonpath">PYTHONPATH</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pre-compiled-libraries">Pre-Compiled Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#platform-specific">Platform Specific</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ms-windows">MS-Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="recover.html">Recovering Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#compatibility">Compatibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/index.html">术语</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">关于本手册</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../contents.html">Blender 2.77 手册</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../contents.html">文献</a> &raquo;</li>
      
          <li><a href="index.html">问题排查</a> &raquo;</li>
      
    <li>Python Errors</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/troubleshooting/python.txt" rel="nofollow"> 查看页面源码</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-errors">
<h1>Python Errors<a class="headerlink" href="#python-errors" title="Permalink to this headline">¶</a></h1>
<div class="section" id="pythonpath">
<h2>PYTHONPATH<a class="headerlink" href="#pythonpath" title="Permalink to this headline">¶</a></h2>
<p>Blender will fail to load if the <code class="docutils literal"><span class="pre">PYTHONPATH</span></code> is set incorrectly.</p>
<p>This can be useful for Python developers who want to use their own Python installation
however, it will prevent Blender from opening at all when set to an incompatible version of Python.</p>
<p>To see if this is the cause of an error temporary unset the environment variable and reload Blender.</p>
<p>See <a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH">Python&#8217;s documentation</a> for details.</p>
</div>
<div class="section" id="pre-compiled-libraries">
<h2>Pre-Compiled Libraries<a class="headerlink" href="#pre-compiled-libraries" title="Permalink to this headline">¶</a></h2>
<p>While not common practice, Python add-ons can be distributed with their own pre-compiled libraries.
Unlike regular Python scripts, these are not portable between different platforms.</p>
<p>It is possible the library is incompatible with your Blender installation
(attempting to load a library built for a different version of Python,
or loading a 32-bit library on a 64-bit system).</p>
<p>If the add-on contains <code class="docutils literal"><span class="pre">.pyd</span></code> or <code class="docutils literal"><span class="pre">.so</span></code> files,
check that the distribution is compatible with your operating system.</p>
</div>
<div class="section" id="platform-specific">
<h2>Platform Specific<a class="headerlink" href="#platform-specific" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ms-windows">
<h3>MS-Windows<a class="headerlink" href="#ms-windows" title="Permalink to this headline">¶</a></h3>
<div class="section" id="mixed-python-libraries-dll-s">
<h4>Mixed Python Libraries (DLL&#8217;s)<a class="headerlink" href="#mixed-python-libraries-dll-s" title="Permalink to this headline">¶</a></h4>
<p>If Python is raising errors or you have an add-on that just fails when enabled with an error, eg:
<code class="docutils literal"><span class="pre">...</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">Win32</span> <span class="pre">application.</span></code>.</p>
<div class="figure" id="id1">
<img alt="../_images/troubleshooting-python.png" src="../_images/troubleshooting-python.png" />
<p class="caption"><span class="caption-text">A Python traceback.</span></p>
</div>
<p>This may be caused by some inconsistency in the Python libraries.
While Blender comes with its own bundled Python interpreter, duplicate, incompatible libraries can cause problems.</p>
<p>To find out which Python Library caused the Problem check the error message.</p>
<p>This is normally reported somewhere around the bottom line of the traceback.
With the error above you see the problem is caused while trying to import <code class="docutils literal"><span class="pre">_socket</span></code>.
This corresponds to either a file named <code class="docutils literal"><span class="pre">_socket.py</span></code> or <code class="docutils literal"><span class="pre">_socket.pyd</span></code>.</p>
<p>To help troubleshoot this problem,
the following script can be pasted into the text edit and run to check for duplicate libraries in your search path.
(output will show in <a class="reference internal" href="../advanced/command_line/introduction.html"><span class="doc">Command Line Window</span></a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1"># Change this based on the library you wish to test</span>
<span class="n">test_lib</span> <span class="o">=</span> <span class="s2">&quot;_socket.pyd&quot;</span>

<span class="k">def</span> <span class="nf">GetSystemDirectory</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">ctypes</span> <span class="kn">import</span> <span class="n">windll</span><span class="p">,</span> <span class="n">create_string_buffer</span><span class="p">,</span> <span class="n">sizeof</span>
    <span class="n">GetSystemDirectory</span> <span class="o">=</span> <span class="n">windll</span><span class="o">.</span><span class="n">kernel32</span><span class="o">.</span><span class="n">GetSystemDirectoryA</span>
    <span class="nb">buffer</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="mi">260</span><span class="p">)</span>
    <span class="n">GetSystemDirectory</span><span class="p">(</span><span class="nb">buffer</span><span class="p">,</span> <span class="n">sizeof</span><span class="p">(</span><span class="nb">buffer</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">fsdecode</span><span class="p">(</span><span class="nb">buffer</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">library_search_paths</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="c1"># Windows search paths</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
        <span class="n">GetSystemDirectory</span><span class="p">(),</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;WINDIR&quot;</span><span class="p">],</span>  <span class="c1"># GetWindowsDirectory</span>
        <span class="o">*</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PATH&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">),</span>

        <span class="c1"># regular Python search paths</span>
        <span class="o">*</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
        <span class="p">)</span>

<span class="k">def</span> <span class="nf">check_library_duplicate</span><span class="p">(</span><span class="n">libname</span><span class="p">):</span>
    <span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">library_search_paths</span><span class="p">()</span>
             <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">libname</span><span class="p">))]</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Library </span><span class="si">%r</span><span class="s2"> found in </span><span class="si">%d</span><span class="s2"> locations:&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">libname</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)))</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;- </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">p</span><span class="p">)</span>

<span class="n">check_library_duplicate</span><span class="p">(</span><span class="n">test_lib</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="recover.html" class="btn btn-neutral float-right" title="Recovering Data" accesskey="n">下一页 <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="crash.html" class="btn btn-neutral" title="Crashes" accesskey="p"><span class="fa fa-arrow-circle-left"></span> 上一页</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright : This page is licensed under a CC-BY-SA 4.0 Intl. License.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.77',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1418081-1', 'auto');
  ga('send', 'pageview');

</script>
</div>


</body>
</html>